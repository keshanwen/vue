{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/utils.js","../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/observe/scheduler.js","../src/observe/watcher.js","../src/state.js","../src/vdom/patch.js","../src/lifeCycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/global-api/index.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\r\n\r\nfunction genProps(attrs) {\r\n    // {key:value,key:value,}\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i];\r\n        if (attr.name === 'style') { // {name:id,value:'app'}\r\n            let styles = {}\r\n            attr.value.replace(/([^;:]+):([^;:]+)/g, function() {\r\n                styles[arguments[1]] = arguments[2];\r\n            })\r\n            attr.value = styles\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\n\r\nfunction gen(el) {\r\n    if (el.type == 1) {\r\n        return generate(el); // 如果是元素就递归的生成\r\n    } else {\r\n        let text = el.text; // {{}}\r\n        if (!defaultTagRE.test(text)) return `_v('${text}')`; // 说明就是普通文本\r\n\r\n        // 说明有表达式 我需要 做一个表达式和普通值的拼接 ['aaaa',_s(name),'bbb'].join('+)\r\n        // _v('aaaa'+_s(name) + 'bbb')\r\n        let lastIndex = defaultTagRE.lastIndex = 0;\r\n        let tokens = []; // <div> aaa{{bbb}} aaa </div>\r\n        let match;\r\n\r\n        // ，每次匹配的时候 lastIndex 会自动向后移动\r\n        while (match = defaultTagRE.exec(text)) { // 如果正则 + g 配合exec 就会有一个问题 lastIndex的问题\r\n            let index = match.index;\r\n            if(index > lastIndex){\r\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)));\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`);\r\n            lastIndex = index + match[0].length;\r\n        }\r\n        if(lastIndex < text.length){\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n        }\r\n        return `_v(${tokens.join('+')})`; // webpack 源码 css-loader  图片处理\r\n    }\r\n}\r\n\r\nfunction genChildren(el) {\r\n    let children = el.children;\r\n    if (children) {\r\n        return children.map(item => gen(item)).join(',')\r\n    }\r\n    return false;\r\n}\r\n\r\n// _c(div,{},c1,c2,c3,c4)\r\nexport function generate(ast) {\r\n    let children = genChildren(ast)\r\n    let code = `_c('${ast.tag}',${\r\n        ast.attrs.length?genProps(ast.attrs) :'undefined'\r\n    }${\r\n        children? `,${children}` :''\r\n    })`\r\n    return code;\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\n\r\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\r\n\r\n// vue3的编译原理比vue2里好很多，没有这么多正则了\r\nexport function parserHTML(html) {\r\n    // 可以不停的截取模板，直到把模板全部解析完毕\r\n    let stack = [];\r\n    let root = null;\r\n    // 我要构建父子关系\r\n    function createASTElement(tag,attrs,parent = null){\r\n        return {\r\n            tag,\r\n            type:1, // 元素\r\n            children:[],\r\n            parent,\r\n            attrs\r\n        }\r\n    }\r\n    function start(tag,attrs){ // [div,p]\r\n        // 遇到开始标签 就取栈中的最后一个作为父节点\r\n        let parent = stack[stack.length-1];\r\n        let element = createASTElement(tag,attrs,parent);\r\n        if(root == null){ // 说明当前节点就是根节点\r\n            root = element\r\n        }\r\n        if(parent){\r\n            element.parent = parent; // 跟新p的parent属性 指向parent\r\n            parent.children.push(element);\r\n        }\r\n        stack.push(element)\r\n    }\r\n    function end(tagName){\r\n        let endTag = stack.pop();\r\n        if(endTag.tag != tagName){\r\n            console.log('标签出错')\r\n        }\r\n    }\r\n    function text(chars){\r\n        let parent = stack[stack.length-1];\r\n        chars = chars.replace(/\\s/g,\"\");\r\n        if(chars){\r\n            parent.children.push({\r\n                type:2,\r\n                text:chars\r\n            })\r\n        }\r\n    }\r\n    function advance(len) {\r\n        html = html.substring(len);\r\n    }\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);  // 4.30 继续\r\n        if(start){\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length);\r\n            let end;\r\n            let attr;\r\n            while (!(end = html.match(startTagClose)) && ( attr = html.match(attribute))) { // 1要有属性 2，不能为开始的结束标签 <div>\r\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\r\n                advance(attr[0].length);\r\n            } // <div id=\"app\" a=1 b=2 >\r\n            if(end){\r\n                advance(end[0].length);\r\n            }\r\n            return match;\r\n        }\r\n        return false;\r\n    }\r\n    while (html) {\r\n        // 解析标签和文本\r\n        let index = html.indexOf('<');\r\n        if (index == 0) {\r\n            // 解析开始标签 并且把属性也解析出来  </div>\r\n            const startTagMatch = parseStartTag()\r\n            if (startTagMatch) { // 开始标签\r\n                start(startTagMatch.tagName,startTagMatch.attrs);\r\n                continue;\r\n            }\r\n            let endTagMatch;\r\n            if (endTagMatch = html.match(endTag)) { // 结束标签\r\n                end(endTagMatch[1]);\r\n                advance(endTagMatch[0].length);\r\n                continue;\r\n            }\r\n        }\r\n        // 文本\r\n        if(index > 0){ // 文本\r\n            let chars = html.substring(0,index) //<div></div>\r\n            text(chars);\r\n            advance(chars.length)\r\n        }\r\n    }\r\n\r\n    return root;\r\n\r\n}\r\n\r\n// const str = parserHTML('<div id=\"app\">hello wolrd <span>hello</span></div>')\r\n\r\n// console.log(str)\r\n\r\n//  <div id=\"app\">hello wolrd <span>hello</span></div> */}","import { generate } from \"./generate\";\r\nimport { parserHTML } from \"./parser\";\r\n\r\n\r\nexport function compileToFunction(template) {\r\n\r\n    // 1.将模板变成ast语法树\r\n    let ast = parserHTML(template);\r\n\r\n    // 代码优化 标记静态节点\r\n\r\n    // 2.代码生成\r\n    let code = generate(ast);\r\n    let render = new Function(`with(this){return ${code}}`);\r\n    console.log(render.toString())\r\n\r\n    return render\r\n\r\n    // 1.编译原理\r\n    // 2.响应式原理 依赖收集\r\n    // 3.组件化开发 （贯穿了vue的流程）\r\n    // 4.diff算法\r\n}\r\n\r\n","\r\nexport function isFunction(val){\r\n    return typeof val == 'function'\r\n}\r\nexport function isObject(val){\r\n    return typeof val == 'object' && val !== null;\r\n}\r\nexport let isArray = Array.isArray\r\n\r\nlet callbacks = []\r\nlet waiting = false\r\nfunction flushCallbacks() {\r\n    callbacks.forEach(fn => fn())\r\n    callbacks = []\r\n    waiting = false\r\n}\r\n\r\n// 微任务是在页面渲染前执行 我取的是内存中的dom, 不关心你渲染完毕没有\r\nexport function nextTick(fn) {\r\n    callbacks.push(fn)\r\n    if (!waiting) {\r\n        Promise.resolve().then(flushCallbacks)\r\n        waiting = true\r\n    }\r\n}\r\n\r\n\r\nlet lifeCycleHooks = [\r\n    'beforeCreate',\r\n    'created',\r\n    'beforeMount',\r\n    'mounted',\r\n    'beforeUpdate',\r\n    'updated',\r\n    'beforeDestroy',\r\n    'destroyed',\r\n]\r\n\r\nlet strats = {}\r\n\r\nfunction mergeHook(parentVal, childVal) {\r\n    if (childVal) {\r\n        if (parentVal) {\r\n            return parentVal.concat(childVal)\r\n        } else {\r\n            return [childVal]\r\n        }\r\n    } else {\r\n        return parentVal\r\n    }\r\n}\r\n\r\nlifeCycleHooks.forEach(hook => {\r\n    strats[hook] = mergeHook\r\n})\r\n\r\nstrats.components = function (parentVal, childVal) {\r\n    // Vue.options.components\r\n    let options = Object.create(parentVal) // 根据父对象构造一个新对象 options._proto_ = parentVal\r\n    if (childVal) {\r\n        for (let key in childVal) {\r\n            options[key] = childVal[key]\r\n        }\r\n    }\r\n    return options\r\n}\r\n\r\nexport function mergeOptions(parent, child) {\r\n    const options = {}\r\n    for (let key in parent) {\r\n        mergeField(key)\r\n    }\r\n    for (let key in child) {\r\n        if (parent.hasOwnProperty(key)) {\r\n            continue\r\n        }\r\n        mergeField(key)\r\n    }\r\n\r\n    function mergeField(key) {\r\n        const parentVal = parent[key]\r\n        const childVal = child[key]\r\n\r\n        if (strats[key]) {\r\n            options[key] = strats[key](parentVal, childVal)\r\n        } else {\r\n            if (isObject(parentVal) && isObject(childVal)) {\r\n                options[key] = { ...parentVal, ...childVal }\r\n            } else {\r\n                options[key] = child[key] || parent[key]\r\n            }\r\n        }\r\n    }\r\n\r\n    return options\r\n}\r\n\r\nexport function isReservedTag(str) {\r\n    let reservedTag = 'a,div,span,p,img,button,ul,li';\r\n    return reservedTag.includes(str)\r\n}","let oldArrayPrototype = Array.prototype; // 获取数组的老的原型方法\r\nexport let arrayMethods = Object.create(oldArrayPrototype); // 让arrayMethods 通过__proto__ 能获取到数组的方法\r\n// arrayMethods.__proto__ == oldArrayPrototype\r\n// arrayMethods.push = function\r\nlet methods = [ // 只有这七个方法 可以导致数组发生变化\r\n    'push',\r\n    'shift',\r\n    'pop',\r\n    'unshift',\r\n    'reverse',\r\n    'sort',\r\n    'splice'\r\n]\r\nmethods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n        // 数组新增的属性 要看一下是不是对象，如果是对象 继续进行劫持\r\n        // 需要调用数组原生逻辑\r\n        oldArrayPrototype[method].call(this,...args)\r\n        // todo... 可以添加自己逻辑 函数劫持 切片\r\n        let inserted = null;\r\n        let ob = this.__ob__;\r\n        switch (method) {\r\n            case 'splice': // 修改 删除  添加  arr.splice(0,0,100,200,300)\r\n                inserted = args.slice(2); // splice方法从第三个参数起 是增添的新数据\r\n                break;\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args;// 调用push 和 unshift 传递的参数就是新增的逻辑\r\n                break;\r\n        }\r\n        // inserted[] 遍历数组 看一下它是否需要进行劫持\r\n        if (inserted) ob.observeArray(inserted)\r\n        ob.dep.notify() // 触发页面更新流程\r\n  }\r\n});\r\n\r\n// 属性的查找：是先找自己身上的，找不到去原型上查找\r\n","\r\nlet id = 0\r\n/*\r\n  多对多的关系\r\n  dep.subs = [watcher]\r\n  watcher.deps = [dep]\r\n*/\r\n\r\nclass Dep {\r\n  constructor() { // 要把 watcher 放到 dep 中\r\n    this.subs = []\r\n    this.id = id++\r\n  }\r\n  depend() {\r\n    // 要给watcher 也加一个标识 防止重复\r\n    // this.subs.push(Dep.target)\r\n    // 让 dep 记住这个 watcher ,watcher 还要记住 dep 相互的关系\r\n    if (Dep.target) {\r\n      Dep.target.addDep(this) // 在 watcher 中在条用 dep 的 addSub 方法\r\n    }\r\n  }\r\n  addSub(watcher) {\r\n    this.subs.push(watcher)\r\n  }\r\n  notify() {\r\n    this.subs.forEach( watcher => watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null // 这里我用了一个全局的变量 window.target 静态属性\r\n\r\nlet stack = []\r\n\r\nexport function pushTarget(watcher) {\r\n  Dep.target = watcher\r\n  stack.push(watcher)\r\n  console.log(stack)\r\n}\r\n\r\nexport function popTarget() {\r\n  stack.pop()\r\n  Dep.target = stack[stack.length - 1]\r\n}\r\n\r\nexport default Dep;\r\n","import { isArray, isObject } from \"../utils\";\r\nimport { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\n// 1.每个对象都有一个__proto__属性 它指向所属类的原型   fn.__proto__ = Function.prototype\r\n// 2.每个原型上都有一个constructor属性 指向 函数本身 Function.prototype.constrcutr = Function\r\nclass Observer {\r\n    constructor(value){\r\n        // 不让__ob__ 被遍历到\r\n        // value.__ob__ = this; // 我给对象和数组添加一个自定义属性\r\n\r\n        // 如果给一个对象增加一个不存在的属性，我希望也能更新视图\r\n        this.dep = new Dep() // 给对象和数组都增加dep 属性 {}.__ob__.ep  [].__ob__.dep\r\n        Object.defineProperty(value,'__ob__',{\r\n            value:this,\r\n            enumerable:false // 标识这个属性不能被列举出来，不能被循环到\r\n        })\r\n        if(isArray(value)){\r\n            // 更改数组原型方法, 如果是数组 我就改写数组的原型链\r\n            value.__proto__ = arrayMethods; // 重写数组的方法\r\n            this.observeArray(value);\r\n        }else{\r\n            this.walk(value); // 核心就是循环对象\r\n        }\r\n    }\r\n    observeArray(data){ // 递归遍历数组，对数组内部的对象再次重写 [[]]  [{}]\r\n        // vm.arr[0].a = 100;\r\n        // vm.arr[0] = 100;\r\n        data.forEach(item=> observe(item)); // 数组里面如果是引用类型那么是响应式的\r\n    }\r\n    walk(data){\r\n        Object.keys(data).forEach(key=>{ // 要使用defineProperty重新定义\r\n            defineReactive(data,key,data[key]);\r\n        });\r\n    }\r\n}\r\n// vue2 应用了defineProperty需要一加载的时候 就进行递归操作，所以好性能，如果层次过深也会浪费性能\r\n// 1.性能优化的原则：\r\n// 1) 不要把所有的数据都放在data中，因为所有的数据都会增加get和set\r\n// 2) 不要写数据的时候 层次过深， 尽量扁平化数据\r\n// 3) 不要频繁获取数据\r\n// 4) 如果数据不需要响应式 可以使用Object.freeze 冻结属性\r\nfunction dependArray(value) { // [[[]], {}] 让数组的引用类型都收集依赖\r\n    for (let i = 0; i < value.length; i++) {\r\n        let current = value[i]\r\n        current.__ob__ && current.__ob__.dep.depend()\r\n        if (Array.isArray(current)) {\r\n            dependArray(current)\r\n        }\r\n    }\r\n}\r\n\r\nfunction defineReactive(obj,key,value){ // vue2 慢的原因 主要在这个方法中\r\n    let childOb = observe(value); // 递归进行观测数据，不管有多少层 我都进行defineProperty\r\n\r\n    // chilOb 如果有值 那么就是数组 或者对象\r\n\r\n    let dep = new Dep(); // 每个属性都增加了一个 dep 闭包\r\n\r\n    Object.defineProperty(obj,key,{\r\n        get() { // 后续会有很多逻辑\r\n            if (Dep.target) {\r\n                dep.depend()\r\n                if (childOb) { // 去属性的时候 会对对应的值（对象本身和数组）进行依赖收集\r\n                    childOb.dep.depend() // 让数组和对象也记住当前的 watcher\r\n                    if (isArray(value)) {\r\n                        // 可能是数组套数组的功能\r\n                        dependArray(value)\r\n                    }\r\n                }\r\n            }\r\n            console.log(key, 'get')\r\n            return value; // 闭包，次此value 会像上层的value进行查找\r\n        },\r\n        set(newValue){  // 如果设置的是一个对象那么会再次进行劫持\r\n            if(newValue === value) return\r\n            observe(newValue);\r\n            console.log('修改')\r\n            value = newValue\r\n            dep.notify() // 拿到当前的 dep 里面的 watcher 依次执行\r\n        }\r\n    })\r\n}\r\nexport function observe(value){\r\n    // 1.如果value不是对象，那么就不用观测了，说明写的有问题\r\n    if(!isObject(value)){\r\n        return;\r\n    }\r\n    if(value.__ob__){\r\n        return value.__ob__ ; // 一个对象不需要重新被观测\r\n    }\r\n    // 需要对对象进行观测 （最外层必须是一个{} 不能是数组）\r\n\r\n    // 如果一个数据已经被观测过了 ，就不要在进行观测了， 用类来实现，我观测过就增加一个标识 说明观测过了，在观测的时候 可以先检测是否观测过，如果观测过了就跳过检测\r\n    return new Observer(value)\r\n}","import { nextTick } from \"../utils\"\r\n\r\nlet queue = [] // 存放要更新的 watcher\r\nlet has = {}\r\n\r\nfunction flushSchedulerQueue() {\r\n  // beforeUpadte\r\n  queue.forEach(watcher => watcher.run())\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\n\r\nlet pending = false\r\nexport function queueWatcher(watcher) {\r\n  let id = watcher.id\r\n  if (has[id] == null) {\r\n    has[id] = true\r\n    queue.push(watcher)\r\n    if (!pending) {\r\n      nextTick(flushSchedulerQueue)\r\n      pending = true\r\n    }\r\n  }\r\n}","import Dep from \"./dep\"\r\nimport { queueWatcher } from \"./scheduler\"\r\nimport { popTarget, pushTarget } from \"./dep\"\r\n\r\nlet id = 0;\r\nclass Watcher {\r\n  constructor(vm,exprOrFn,cb, options) {\r\n    this.vm = vm\r\n    this.exprOrFn = exprOrFn\r\n    this.cb = cb\r\n    this.user = !!options.user // 是不是用户watcher\r\n    this.lazy = !!options.lazy\r\n    this.dirty = options.lazy // 如果是计算属性，那么默认值lazy: true dirty: true\r\n    this.options = options\r\n    this.id = id++\r\n    this.depsId = new Set()\r\n    this.deps = []\r\n\r\n\r\n    if (typeof exprOrFn === 'string') {\r\n      this.getter = function () {\r\n        // 当数据取值时，会进行依赖收集\r\n        // age.n vm['age.n'] => vm['age']['n']\r\n        let path = exprOrFn.split('.')\r\n        let obj = vm\r\n        for (let i = 0; i < path.length; i++) {\r\n          obj = obj[path[i]]\r\n        }\r\n        return obj // getter 方法\r\n      }\r\n    } else {\r\n      this.getter = exprOrFn; // exprOrFn 就是页面渲染逻辑\r\n    }\r\n    // this.get() // 表示上来后就做一次初始化\r\n    // 第一次的 value\r\n    this.value = this.lazy ? undefined : this.get() // 默认初始化 要取值\r\n  }\r\n  addDep(dep) {\r\n    let did = dep.id\r\n    if (!this.depsId.has(did)) {\r\n      this.depsId.add(did)\r\n      this.deps.push(dep) // 做了保存 id 的功能 并且让 watcher 记住 dep\r\n      dep.addSub(this)\r\n    }\r\n  }\r\n  get() {\r\n    // Dep.target = this // Dep.target = watcher\r\n    pushTarget(this)\r\n    const value = this.getter.call(this.vm)\r\n    // this.getter() // 页面的渲染的逻辑 vm.name / vm.age render() 方法会去 vm 上取值 vm._update(vm._render)\r\n    // Dep.target = null // 渲染完毕后 就将标识清空了，只有在渲染的时候才会进行依赖收集\r\n    popTarget()\r\n    return value\r\n  }\r\n  update() {\r\n    // 每次更新数据都会同步调用这个 update 方法，可以将更新的逻辑缓存起来，等会同步更新数据的逻辑执行完毕后，依次调用（去重的逻辑）\r\n    console.log('缓存更新')\r\n\r\n    if (this.lazy) {\r\n      this.dirty = true\r\n    } else {\r\n      queueWatcher(this) // 多次调用 update 希望将watcher 缓存起来，等下一会一起更新\r\n    }\r\n    // 可以做异步更新处理\r\n    // this.get()\r\n  }\r\n  run() {\r\n    console.log('真正执行更新')\r\n    //this.get() // render()  取最新的 vm 上的数据\r\n    let newValue = this.get()\r\n    let oldValue = this.value\r\n    this.value = newValue // 为了保证下一次更新时 上一次的最新值是下一次的老值\r\n    if (this.user) {\r\n      this.cb.call(this.vm, newValue, oldValue)\r\n    }\r\n  }\r\n  evaluate() {\r\n    this.dirty = false // 为 fasle 表示已经取过值了\r\n    this.value = this.get() // 用户的 getter 执行\r\n  }\r\n  depend() {\r\n    let i = this.deps.length\r\n    while (i--) {\r\n      this.deps[i].depend() // lastName firstName 收集渲染 watcher\r\n    }\r\n  }\r\n}\r\n\r\n// watcher 和 dep\r\n// 我们将更新的功能封装了一个 watcher\r\n// 渲染页面前， 会将当前 watcher 放到Dep 类上\r\n// 在 vue 中页面渲染时使用的属性，需要进行依赖收集， 收集对象的渲染watcher\r\n// 取值时， 给每个属性都加了 dep 属性， 用于存储这个 渲染 watcher （同一个watcher 会对应多个dep）\r\n// 每个属性可能对应多个视图 （多个视图肯定是多个 watcher） 一个属性要对应多个watcher\r\n// dep.depend() => 通知dep 存放watcher => Dep.target.addDep()  => 通知watcher 存放dep\r\n// 双向存储\r\n\r\nexport default Watcher","import { observe } from \"./observe\"; // rollup-plugin-node-resolve\r\nimport { isFunction, isArray } from \"./utils\";\r\nimport Watcher from \"./observe/watcher\";\r\nimport Dep from \"./observe/dep\";\r\n\r\nexport function stateMixin(Vue) {\r\n    Vue.prototype.$watch = function (key, handler, options = {}) {\r\n        options.user = true // 是一个用户自己写 的 watcher\r\n\r\n        new Watcher(this, key, handler, options)\r\n    }\r\n}\r\n\r\nexport function initState(vm){\r\n    const opts = vm.$options;\r\n\r\n    if(opts.data){\r\n        initData(vm);\r\n    }\r\n\r\n    if (opts.computed) {\r\n        initComputed(vm, opts.computed)\r\n    }\r\n\r\n    if (opts.watch) {\r\n        initWatch(vm, opts.watch)\r\n    }\r\n\r\n}\r\nfunction proxy(vm,key,source){ // 取值的时候做代理，不是暴力的把_data 属性赋予给vm, 而且直接赋值会有命名冲突问题\r\n    Object.defineProperty(vm,key,{\r\n        get(){ // ?\r\n            return vm[source][key]; // vm._data.message\r\n        },\r\n        set(newValue){ // ?\r\n            vm[source][key] = newValue; // vm._data.message = newValue\r\n        }\r\n    })\r\n}\r\nfunction initData(vm){\r\n    let data = vm.$options.data; // 用户传入的数据\r\n\r\n    // 如果用户传递的是一个函数 则取函数的返回值作为对象 ， 如果就是对象那就直接使用这个对象\r\n    // 只有根实例可以data是一个对象\r\n\r\n    // data 和 vm._data 引用的是同一个人 -》 data被劫持了  vm._data也被劫持\r\n    data = vm._data =  isFunction(data) ? data.call(vm) : data; // _data 已经是响应式的了\r\n\r\n    // 需要将data变成响应式的 Object.defineProperty， 重写data中的所有属性\r\n    observe(data); // 观测对象中的属性\r\n\r\n\r\n\r\n    for(let key in data){ // vm.message => vm._data.message\r\n        proxy(vm,key,'_data');// 代理vm上的取值和设置值 和  vm._data 没关系了\r\n    }\r\n}\r\n\r\n\r\nfunction initWatch(vm, watch) {\r\n    for (let key in watch) {\r\n        let handler = watch[key]\r\n\r\n        if (isArray(handler)) {\r\n            for (let i = 0; i < handler.length; i++) {\r\n                createWatcher(vm, key, handler[i])\r\n            }\r\n        } else {\r\n            createWatcher(vm, key, handler)\r\n        }\r\n    }\r\n}\r\n\r\nfunction createWatcher(vm, key, handler) {\r\n    return vm.$watch(key, handler)\r\n}\r\n\r\nfunction initComputed(vm, computed) {\r\n    const watchers = vm._computedWatchers = {}\r\n    for (let key in computed) {\r\n        const userDef = computed[key]\r\n        // 依赖的属性变化就重新取值 get\r\n        let getter = typeof userDef === 'function' ? userDef : userDef.get\r\n\r\n        // 计算属性本质就是 watcher\r\n        // 将 watcher 和属性 做一个映射\r\n        watchers[key] = new Watcher(vm, getter, () => { }, {\r\n            lazy: true  // 默认不执行\r\n        })\r\n\r\n        // 将 key 定义在 vm 上\r\n        defineComputed(vm, key, userDef)\r\n    }\r\n}\r\n\r\nfunction createComputedGetter(key) {\r\n    return function computedGetter() { // 取计算属性 走的是这个函数\r\n        // this._computedWatchers 包含着所有的计算属性\r\n        // 通过 key 可以拿到对应的watcher, 这个watcher 中包含了 getter\r\n        let watcher = this._computedWatchers[key]\r\n\r\n        // 脏就是 要调用用户的 getter 不脏就是不要调用 getter\r\n        if (watcher.dirty) {\r\n            watcher.evaluate()\r\n        }\r\n\r\n        // 如果当前取完值后 Dep.target 还有值 需要继续向上收集\r\n        if (Dep.target) {\r\n            // 计算属性 watcher 内部有两个dep, firsteName lastName\r\n            watcher.depend() // watcher 里对应了 多个dep\r\n        }\r\n\r\n        return watcher.value\r\n    }\r\n}\r\n\r\nfunction defineComputed(vm, key, userDef) {\r\n    let sharedProperty = {}\r\n    if (typeof userDef === 'function') {\r\n        sharedProperty.get = userDef\r\n    } else {\r\n        sharedProperty.get = createComputedGetter(key)\r\n        sharedProperty.set = userDef.set\r\n    }\r\n    Object.defineProperty(vm, key, sharedProperty) // computed 就是一个 defineProperty\r\n}","\r\n\r\nexport function patch(oldVnode, vnode) {\r\n\r\n    if(!oldVnode){\r\n        return createElm(vnode); // 如果没有el元素，那就直接根据虚拟节点返回真实节点\r\n    }\r\n\r\n\r\n\r\n    if (oldVnode.nodeType == 1) {\r\n        // 用vnode  来生成真实dom 替换原本的dom元素\r\n        const parentElm = oldVnode.parentNode; // 找到他的父亲\r\n        let elm = createElm(vnode); //根据虚拟节点 创建元素\r\n\r\n        // 在第一次渲染后 是删除掉节点，下次在使用无法获取\r\n        parentElm.insertBefore(elm, oldVnode.nextSibling);\r\n\r\n        parentElm.removeChild(oldVnode)\r\n\r\n\r\n        return elm\r\n    }\r\n}\r\n// 创建真实节点的\r\n\r\nfunction createComponent(vnode) {\r\n    let i = vnode.data; //  vnode.data.hook.init\r\n    if ((i = i.hook) && (i = i.init)) {\r\n        i(vnode); // 调用init方法\r\n    }\r\n    if(vnode.componentInstance){ // 有属性说明子组件new完毕了，并且组件对应的真实DOM挂载到了componentInstance.$el\r\n        return true;\r\n    }\r\n\r\n}\r\n\r\nfunction createElm(vnode) {\r\n    let { tag, data, children, text, vm } = vnode\r\n    if (typeof tag === 'string') { // 元素\r\n        if (createComponent(vnode)) {\r\n            // 返回组件对应的真实节点\r\n            return vnode.componentInstance.$el;\r\n        }\r\n\r\n        vnode.el = document.createElement(tag); // 虚拟节点会有一个el属性 对应真实节点\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        });\r\n\r\n\r\n    } else {\r\n        vnode.el = document.createTextNode(text);\r\n    }\r\n    return vnode.el\r\n}","import { patch } from \"./vdom/patch\"\r\nimport Watcher from \"./observe/watcher\"\r\nimport { nextTick } from \"./utils\"\r\n\r\n\r\nexport function mountComponent(vm) {\r\n  let updateComponent = () => {\r\n    vm._update(vm._render())\r\n  }\r\n  // 观察者模式： 属性是“被观察者” 刷新页面: “观察者”\r\n  callHook(vm, 'beforeMount')\r\n  // 每个组件都有一个 watcher, 我们把这个 watcher 称之为渲染 watcher\r\n  new Watcher(vm, updateComponent, () => {\r\n    console.log('后续增加更新钩子函数 update')\r\n  }, true)\r\n  callHook(vm, 'mounted')\r\n  // updateComponent()\r\n}\r\n\r\nexport function lifeCycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    // 既有初始化，又有更新\r\n    // 采用的是 先深度遍历 创建节点（遇到节点就创造节点，递归创建）\r\n    const vm = this\r\n    vm.$el = patch(vm.$el, vnode)\r\n  }\r\n\r\n  Vue.prototype.$nextTick = nextTick\r\n}\r\n\r\nexport function callHook(vm,hook){\r\n    let handlers = vm.$options[hook];\r\n    if(handlers){\r\n        for(let i =0; i < handlers.length;i++){\r\n            handlers[i].call(vm)\r\n        }\r\n    }\r\n}","import { compileToFunction } from \"./compiler\";\r\nimport { initState } from \"./state\";\r\nimport { mountComponent, callHook } from \"./lifeCycle\";\r\nimport { mergeOptions } from \"./utils\"\r\n\r\nexport function initMixin(Vue) {\r\n    // 后续组件化开发的时候  Vue.extend 可以创造一个子组件，子组件可以继承Vue，子组件也可以调用_init方法\r\n    Vue.prototype._init = function(options) {\r\n        const vm = this;\r\n        // 把用户的选项放到 vm上，这样在其他方法中都可以获取到options 了\r\n        vm.$options = mergeOptions(vm.constructor.options, options); // 为了后续扩展的方法 都可以获取$options选项\r\n\r\n        callHook(vm, 'beforeCreate');\r\n        // options中是用户传入的数据 el , data\r\n        initState(vm);\r\n        callHook(vm,'created')\r\n\r\n\r\n        if (vm.$options.el) {\r\n            // 要将数据挂载到页面上\r\n            // 现在数据已经被劫持了， 数据变化需要更新视图 diff算法更新需要更新的部分\r\n            // vue -> template（写起来更符合直觉） -> jsx （灵活）\r\n            // vue3 template 写起来性能会更高一些 内部做了很多优化\r\n\r\n            // template -> ast语法树（用来描述语法的，描述语法本身的） -> 描述成一个树结构 ->  将代码重组成js语法\r\n            // 模板编译原理 （把template模板编译成render函数-》 虚拟DOM -》 diff算法比对虚拟DOM）\r\n            // ast -> render返回 -> vnode -> 生成真实dom\r\n            //      更新的时候再次调用render -> 新的vnode  -> 新旧比对 -> 更新真实dom\r\n            vm.$mount(vm.$options.el);\r\n        }\r\n    }\r\n    // new Vue({el}) new Vue().$mount\r\n    Vue.prototype.$mount = function(el) {\r\n        const vm = this;\r\n        const opts = vm.$options;\r\n        el = document.querySelector(el); // 获取真实的元素\r\n        vm.$el = el; // 页面真实元素\r\n\r\n        if (!opts.render) {\r\n            // 模板编译\r\n            let template = opts.template;\r\n            if (!template) {\r\n                template = el.outerHTML;\r\n            }\r\n            let render = compileToFunction(template)\r\n            opts.render = render;\r\n\r\n        }\r\n\r\n        // console.log(opts.render)\r\n       mountComponent(vm,el) // 组件的挂载流程\r\n    }\r\n\r\n\r\n}","import { isObject, isReservedTag } from \"../utils\";\r\n\r\nexport function createElement(vm, tag, data = {}, ...children) {\r\n\r\n    // 如果tag是组件 应该渲染一个组件的vnode\r\n\r\n    if (isReservedTag(tag)) {\r\n        return vnode(vm, tag, data, data.key, children, undefined);\r\n    } else {\r\n        const Ctor = vm.$options.components[tag]\r\n        return createComponent(vm, tag, data, data.key, children, Ctor);\r\n    }\r\n}\r\n// 创建组件的虚拟节点, 为了区分组件和元素  data.hook  /  componentOptions\r\nfunction createComponent(vm, tag, data, key, children, Ctor) {\r\n    // 组件的构造函数\r\n    if(isObject(Ctor)){\r\n        Ctor = vm.$options._base.extend(Ctor); // Vue.extend\r\n    }\r\n    data.hook = { // 等会渲染组件时 需要调用此初始化方法\r\n        init(vnode){\r\n           let vm = vnode.componentInstance =  new Ctor({_isComponent:true}); // new Sub 会用此选项和组件的配置进行合并\r\n           vm.$mount(); // 组件挂载完成后 会在 vnode.componentInstance.$el => <button>\r\n        }\r\n    }\r\n    return vnode(vm,`vue-component-${tag}`,data,key,undefined,undefined,{Ctor,children})\r\n}\r\nexport function createTextElement(vm, text) {\r\n    return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n}\r\n\r\nfunction vnode(vm, tag, data, key, children, text,componentOptions) {\r\n    return {\r\n        vm,\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text,\r\n        componentOptions\r\n        // .....\r\n    }\r\n}","import { isObject } from \"./utils\"\r\nimport { createElement, createTextElement } from \"./vdom\"\r\n\r\nexport function renderMixin(Vue){\r\n    Vue.prototype._c = function () { // createElement 创建元素型的节点\r\n        const vm = this;\r\n        return createElement(vm,...arguments)\r\n    }\r\n    Vue.prototype._v = function (text) { // 创建文本的虚拟节点\r\n        const vm = this;\r\n        return createTextElement(vm,text); // 描述虚拟节点是属于哪个实例的\r\n    }\r\n    Vue.prototype._s = function (val) { // JSON.stingfiy()\r\n        if(isObject(val)) return JSON.stringify(val);\r\n        return val;\r\n    }\r\n    Vue.prototype._render = function () {\r\n        const vm = this; // vm中有所有的数据 vm.xxx => vm._data.xxx\r\n        let { render } = vm.$options; // 就是我们解析出来的 render 方法，同事也有可能是用户写的\r\n        let vnode = render.call(vm);\r\n        return vnode;\r\n    }\r\n}","import { mergeOptions } from '../utils';\r\n\r\nexport function initGlobalApi(Vue) {\r\n  Vue.options = {}; // 用来存放全局的配置 , 每个组件初始化的时候都会和options选项进行合并\r\n  /*   Vue.component\r\n  Vue.filter\r\n  Vue.directive */\r\n\r\n  Vue.mixin = function (options) {\r\n    this.options = mergeOptions(this.options, options);\r\n    return this;\r\n  };\r\n\r\n  Vue.options._base = Vue; // 无论后续创建多少个子类 都可以通过_base 找到 Vue\r\n  Vue.options.components = {};\r\n  Vue.component = function (id, definition) {\r\n    // 保证组件的隔离， 每个组件都会产生一个新的类，去继承父类\r\n    definition = this.options._base.extend(definition)\r\n    this.options.components[id] = definition\r\n  };\r\n\r\n  // 给个对象返回类\r\n  Vue.extend = function (opts) {\r\n    // extend方法就是产生一个继承于Vue的类\r\n    // 并且身上应该有父类的所有功能\r\n    const Super = this;\r\n    const Sub = function VueComponent(options) {\r\n      this._init(options);\r\n    };\r\n    // 原型继承\r\n    Sub.prototype = Object.create(Super.prototype);\r\n    Sub.prototype.constructor = Sub;\r\n    Sub.options = mergeOptions(Super.options, opts); // 只和Vue.options合并\r\n    return Sub;\r\n  };\r\n}\r\n","import { initMixin } from \"./init\";\r\nimport { lifeCycleMixin } from \"./lifeCycle\";\r\nimport { renderMixin } from \"./render\";\r\nimport { stateMixin } from './state'\r\nimport { initGlobalApi } from \"./global-api/index\"\r\n\r\n// vue 要如何实现，原型模式，所有的功能都通过原型扩展的方式来添加\r\nfunction Vue(options){\r\n    this._init(options); // 实现vue的初始化功能\r\n}\r\n\r\ninitMixin(Vue);\r\nrenderMixin(Vue);\r\nlifeCycleMixin(Vue)\r\nstateMixin(Vue)\r\n\r\ninitGlobalApi(Vue)\r\n\r\n\r\n// 导出vue给别人使用\r\nexport default Vue;\r\n\r\n\r\n\r\n// 1.new Vue 会调用_init方法进行初始化操作\r\n// 2.会将用户的选项放到 vm.$options上\r\n// 3.会对当前属性上搜素有没有data 数据   initState\r\n// 4.有data 判断data是不是一个函数 ，如果是函数取返回值 initData\r\n// 5.observe 去观测data中的数据 和 vm没关系，说明data已经变成了响应式\r\n// 6.vm上像取值也能取到data中的数据 vm._data = data 这样用户能取到data了  vm._data\r\n// 7.用户觉得有点麻烦 vm.xxx => vm._data\r\n// 8.如果更新对象不存在的属性，会导致视图不更新， 如果是数组更新索引和长度不会触发更新\r\n// 9.如果是替换成一个新对象，新对象会被进行劫持，如果是数组存放新内容 push unshift() 新增的内容也会被劫持\r\n// 通过__ob__ 进行标识这个对象被监控过  （在vue中被监控的对象身上都有一个__ob__ 这个属性）\r\n// 10如果你就想改索引 可以使用$set方法 内部就是splice()\r\n\r\n\r\n\r\n// 如果有el 需要挂载到页面上"],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","styles","value","replace","arguments","JSON","stringify","slice","gen","el","type","generate","text","test","lastIndex","tokens","match","exec","index","push","trim","join","genChildren","children","map","item","ast","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","parent","start","element","end","tagName","pop","console","log","chars","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","compileToFunction","template","render","Function","toString","isFunction","val","isObject","isArray","Array","callbacks","waiting","flushCallbacks","forEach","fn","nextTick","Promise","resolve","then","lifeCycleHooks","strats","mergeHook","parentVal","childVal","concat","hook","components","options","Object","create","key","mergeOptions","child","mergeField","hasOwnProperty","isReservedTag","reservedTag","includes","oldArrayPrototype","prototype","arrayMethods","methods","method","args","call","inserted","ob","__ob__","observeArray","dep","notify","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","update","pushTarget","popTarget","Observer","defineProperty","enumerable","__proto__","walk","data","observe","keys","defineReactive","dependArray","current","obj","childOb","get","set","newValue","queue","has","flushSchedulerQueue","run","pending","queueWatcher","Watcher","vm","exprOrFn","cb","user","lazy","dirty","depsId","Set","deps","getter","path","split","undefined","did","add","oldValue","evaluate","stateMixin","Vue","$watch","handler","initState","opts","$options","initData","computed","initComputed","watch","initWatch","proxy","source","_data","createWatcher","watchers","_computedWatchers","userDef","defineComputed","createComputedGetter","computedGetter","sharedProperty","patch","oldVnode","vnode","createElm","nodeType","parentElm","parentNode","elm","insertBefore","nextSibling","removeChild","createComponent","init","componentInstance","$el","document","createElement","appendChild","createTextNode","mountComponent","updateComponent","_update","_render","callHook","lifeCycleMixin","$nextTick","handlers","initMixin","_init","$mount","querySelector","outerHTML","Ctor","_base","extend","_isComponent","createTextElement","componentOptions","renderMixin","_c","_v","_s","initGlobalApi","mixin","component","definition","Super","Sub","VueComponent"],"mappings":"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"}