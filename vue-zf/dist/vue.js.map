{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/utils.js","../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/vdom/patch.js","../src/observe/scheduler.js","../src/observe/watcher.js","../src/lifeCycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\r\n\r\nfunction genProps(attrs) {\r\n    // {key:value,key:value,}\r\n    let str = '';\r\n    for (let i = 0; i < attrs.length; i++) {\r\n        let attr = attrs[i];\r\n        if (attr.name === 'style') { // {name:id,value:'app'}\r\n            let styles = {}\r\n            attr.value.replace(/([^;:]+):([^;:]+)/g, function() {\r\n                styles[arguments[1]] = arguments[2];\r\n            })\r\n            attr.value = styles\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\n\r\nfunction gen(el) {\r\n    if (el.type == 1) {\r\n        return generate(el); // 如果是元素就递归的生成\r\n    } else {\r\n        let text = el.text; // {{}}\r\n        if (!defaultTagRE.test(text)) return `_v('${text}')`; // 说明就是普通文本\r\n\r\n        // 说明有表达式 我需要 做一个表达式和普通值的拼接 ['aaaa',_s(name),'bbb'].join('+)\r\n        // _v('aaaa'+_s(name) + 'bbb')\r\n        let lastIndex = defaultTagRE.lastIndex = 0;\r\n        let tokens = []; // <div> aaa{{bbb}} aaa </div>\r\n        let match;\r\n\r\n        // ，每次匹配的时候 lastIndex 会自动向后移动\r\n        while (match = defaultTagRE.exec(text)) { // 如果正则 + g 配合exec 就会有一个问题 lastIndex的问题\r\n            let index = match.index;\r\n            if(index > lastIndex){\r\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)));\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`);\r\n            lastIndex = index + match[0].length;\r\n        }\r\n        if(lastIndex < text.length){\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n        }\r\n        return `_v(${tokens.join('+')})`; // webpack 源码 css-loader  图片处理\r\n    }\r\n}\r\n\r\nfunction genChildren(el) {\r\n    let children = el.children;\r\n    if (children) {\r\n        return children.map(item => gen(item)).join(',')\r\n    }\r\n    return false;\r\n}\r\n\r\n// _c(div,{},c1,c2,c3,c4)\r\nexport function generate(ast) {\r\n    let children = genChildren(ast)\r\n    let code = `_c('${ast.tag}',${\r\n        ast.attrs.length?genProps(ast.attrs) :'undefined'\r\n    }${\r\n        children? `,${children}` :''\r\n    })`\r\n    return code;\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\n\r\n// [1]属性的key   [3] || [4] ||[5] 属性的值  a=1  a='1'  a=\"\"\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\r\n\r\n// vue3的编译原理比vue2里好很多，没有这么多正则了\r\nexport function parserHTML(html) {\r\n    // 可以不停的截取模板，直到把模板全部解析完毕\r\n    let stack = [];\r\n    let root = null;\r\n    // 我要构建父子关系\r\n    function createASTElement(tag,attrs,parent = null){\r\n        return {\r\n            tag,\r\n            type:1, // 元素\r\n            children:[],\r\n            parent,\r\n            attrs\r\n        }\r\n    }\r\n    function start(tag,attrs){ // [div,p]\r\n        // 遇到开始标签 就取栈中的最后一个作为父节点\r\n        let parent = stack[stack.length-1];\r\n        let element = createASTElement(tag,attrs,parent);\r\n        if(root == null){ // 说明当前节点就是根节点\r\n            root = element\r\n        }\r\n        if(parent){\r\n            element.parent = parent; // 跟新p的parent属性 指向parent\r\n            parent.children.push(element);\r\n        }\r\n        stack.push(element)\r\n    }\r\n    function end(tagName){\r\n        let endTag = stack.pop();\r\n        if(endTag.tag != tagName){\r\n            console.log('标签出错')\r\n        }\r\n    }\r\n    function text(chars){\r\n        let parent = stack[stack.length-1];\r\n        chars = chars.replace(/\\s/g,\"\");\r\n        if(chars){\r\n            parent.children.push({\r\n                type:2,\r\n                text:chars\r\n            })\r\n        }\r\n    }\r\n    function advance(len) {\r\n        html = html.substring(len);\r\n    }\r\n    function parseStartTag() {\r\n        const start = html.match(startTagOpen);  // 4.30 继续\r\n        if(start){\r\n            const match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            advance(start[0].length);\r\n            let end;\r\n            let attr;\r\n            while (!(end = html.match(startTagClose)) && ( attr = html.match(attribute))) { // 1要有属性 2，不能为开始的结束标签 <div>\r\n                match.attrs.push({ name: attr[1], value: attr[3] || attr[4] || attr[5] });\r\n                advance(attr[0].length);\r\n            } // <div id=\"app\" a=1 b=2 >\r\n            if(end){\r\n                advance(end[0].length);\r\n            }\r\n            return match;\r\n        }\r\n        return false;\r\n    }\r\n    while (html) {\r\n        // 解析标签和文本\r\n        let index = html.indexOf('<');\r\n        if (index == 0) {\r\n            // 解析开始标签 并且把属性也解析出来  </div>\r\n            const startTagMatch = parseStartTag()\r\n            if (startTagMatch) { // 开始标签\r\n                start(startTagMatch.tagName,startTagMatch.attrs);\r\n                continue;\r\n            }\r\n            let endTagMatch;\r\n            if (endTagMatch = html.match(endTag)) { // 结束标签\r\n                end(endTagMatch[1]);\r\n                advance(endTagMatch[0].length);\r\n                continue;\r\n            }\r\n        }\r\n        // 文本\r\n        if(index > 0){ // 文本\r\n            let chars = html.substring(0,index) //<div></div>\r\n            text(chars);\r\n            advance(chars.length)\r\n        }\r\n    }\r\n\r\n    return root;\r\n\r\n}\r\n\r\n// const str = parserHTML('<div id=\"app\">hello wolrd <span>hello</span></div>')\r\n\r\n// console.log(str)\r\n\r\n//  <div id=\"app\">hello wolrd <span>hello</span></div> */}","import { generate } from \"./generate\";\r\nimport { parserHTML } from \"./parser\";\r\n\r\n\r\nexport function compileToFunction(template) {\r\n\r\n    // 1.将模板变成ast语法树\r\n    let ast = parserHTML(template);\r\n\r\n    // 代码优化 标记静态节点\r\n\r\n    // 2.代码生成\r\n    let code = generate(ast);\r\n    let render = new Function(`with(this){return ${code}}`);\r\n    console.log(render.toString())\r\n\r\n    return render\r\n\r\n    // 1.编译原理\r\n    // 2.响应式原理 依赖收集\r\n    // 3.组件化开发 （贯穿了vue的流程）\r\n    // 4.diff算法\r\n}\r\n\r\n","export function isFunction(val){\r\n    return typeof val == 'function'\r\n}\r\nexport function isObject(val){\r\n    return typeof val == 'object' && val !== null;\r\n}\r\nexport let isArray = Array.isArray\r\n\r\nlet callbacks = []\r\nlet waiting = false\r\nfunction flushCallbacks() {\r\n    callbacks.forEach(fn => fn())\r\n    callbacks = []\r\n    waiting = false\r\n}\r\n\r\nexport function nextTick(fn) {\r\n    callbacks.push(fn)\r\n    if (!waiting) {\r\n        Promise.resolve().then(flushCallbacks)\r\n        waiting = true\r\n    }\r\n}","let oldArrayPrototype = Array.prototype; // 获取数组的老的原型方法\r\nexport let arrayMethods = Object.create(oldArrayPrototype); // 让arrayMethods 通过__proto__ 能获取到数组的方法\r\n// arrayMethods.__proto__ == oldArrayPrototype\r\n// arrayMethods.push = function\r\nlet methods = [ // 只有这七个方法 可以导致数组发生变化\r\n    'push',\r\n    'shift',\r\n    'pop',\r\n    'unshift',\r\n    'reverse',\r\n    'sort',\r\n    'splice'\r\n]\r\nmethods.forEach(method => {\r\n    arrayMethods[method] = function (...args) {\r\n        // 数组新增的属性 要看一下是不是对象，如果是对象 继续进行劫持\r\n        // 需要调用数组原生逻辑\r\n        oldArrayPrototype[method].call(this,...args)\r\n        // todo... 可以添加自己逻辑 函数劫持 切片\r\n        let inserted = null;\r\n        let ob = this.__ob__;\r\n        switch (method) {\r\n            case 'splice': // 修改 删除  添加  arr.splice(0,0,100,200,300)\r\n                inserted = args.slice(2); // splice方法从第三个参数起 是增添的新数据\r\n                break;\r\n            case 'push':\r\n            case 'unshift':\r\n                inserted = args;// 调用push 和 unshift 传递的参数就是新增的逻辑\r\n                break;\r\n        }\r\n        // inserted[] 遍历数组 看一下它是否需要进行劫持\r\n        if(inserted) ob.observeArray(inserted)\r\n  }\r\n});\r\n\r\n// 属性的查找：是先找自己身上的，找不到去原型上查找\r\n","let id = 0\r\n/*\r\n  多对多的关系\r\n  dep.subs = [watcher]\r\n  watcher.deps = [dep]\r\n*/\r\n\r\nclass Dep {\r\n  constructor() { // 要把 watcher 放到 dep 中\r\n    this.subs = []\r\n    this.id = id++\r\n  }\r\n  depend() {\r\n    // 要给watcher 也加一个标识 防止重复\r\n    // this.subs.push(Dep.target)\r\n    // 让 dep 记住这个 watcher ,watcher 还要记住 dep 相互的关系\r\n    Dep.target.addDep(this) // 在 watcher 中在条用 dep 的 addSub 方法\r\n  }\r\n  addSub(watcher) {\r\n    this.subs.push(watcher)\r\n  }\r\n  notify() {\r\n    this.subs.forEach( watcher => watcher.update())\r\n  }\r\n}\r\n\r\nDep.target = null // 这里我用了一个全局的变量 window.target 静态属性\r\n\r\nexport default Dep;\r\n","import { isArray, isObject } from \"../utils\";\r\nimport { arrayMethods } from \"./array\";\r\nimport Dep from \"./dep\";\r\n\r\n// 1.每个对象都有一个__proto__属性 它指向所属类的原型   fn.__proto__ = Function.prototype\r\n// 2.每个原型上都有一个constructor属性 指向 函数本身 Function.prototype.constrcutr = Function\r\nclass Observer {\r\n    constructor(value){\r\n        // 不让__ob__ 被遍历到\r\n        // value.__ob__ = this; // 我给对象和数组添加一个自定义属性\r\n        Object.defineProperty(value,'__ob__',{\r\n            value:this,\r\n            enumerable:false // 标识这个属性不能被列举出来，不能被循环到\r\n        })\r\n        if(isArray(value)){\r\n            // 更改数组原型方法, 如果是数组 我就改写数组的原型链\r\n            value.__proto__ = arrayMethods; // 重写数组的方法\r\n            this.observeArray(value);\r\n        }else{\r\n            this.walk(value); // 核心就是循环对象\r\n        }\r\n    }\r\n    observeArray(data){ // 递归遍历数组，对数组内部的对象再次重写 [[]]  [{}]\r\n        // vm.arr[0].a = 100;\r\n        // vm.arr[0] = 100;\r\n        data.forEach(item=> observe(item)); // 数组里面如果是引用类型那么是响应式的\r\n    }\r\n    walk(data){\r\n        Object.keys(data).forEach(key=>{ // 要使用defineProperty重新定义\r\n            defineReactive(data,key,data[key]);\r\n        });\r\n    }\r\n}\r\n// vue2 应用了defineProperty需要一加载的时候 就进行递归操作，所以好性能，如果层次过深也会浪费性能\r\n// 1.性能优化的原则：\r\n// 1) 不要把所有的数据都放在data中，因为所有的数据都会增加get和set\r\n// 2) 不要写数据的时候 层次过深， 尽量扁平化数据\r\n// 3) 不要频繁获取数据\r\n// 4) 如果数据不需要响应式 可以使用Object.freeze 冻结属性\r\nfunction defineReactive(obj,key,value){ // vue2 慢的原因 主要在这个方法中\r\n    observe(value); // 递归进行观测数据，不管有多少层 我都进行defineProperty\r\n\r\n    let dep = new Dep(); // 每个属性都增加了一个 dep 闭包\r\n\r\n    Object.defineProperty(obj,key,{\r\n        get() { // 后续会有很多逻辑\r\n            if (Dep.target) {\r\n               dep.depend()\r\n            }\r\n            return value; // 闭包，次此value 会像上层的value进行查找\r\n        },\r\n        set(newValue){  // 如果设置的是一个对象那么会再次进行劫持\r\n            if(newValue === value) return\r\n            observe(newValue);\r\n            // console.log('修改')\r\n            value = newValue\r\n            dep.notify() // 拿到当前的 dep 里面的 watcher 依次执行\r\n        }\r\n    })\r\n}\r\nexport function observe(value){\r\n    // 1.如果value不是对象，那么就不用观测了，说明写的有问题\r\n    if(!isObject(value)){\r\n        return;\r\n    }\r\n    if(value.__ob__){\r\n        return ; // 一个对象不需要重新被观测\r\n    }\r\n    // 需要对对象进行观测 （最外层必须是一个{} 不能是数组）\r\n\r\n    // 如果一个数据已经被观测过了 ，就不要在进行观测了， 用类来实现，我观测过就增加一个标识 说明观测过了，在观测的时候 可以先检测是否观测过，如果观测过了就跳过检测\r\n    return new Observer(value)\r\n}","import { observe } from \"./observe\"; // rollup-plugin-node-resolve\r\nimport { isFunction } from \"./utils\";\r\n\r\nexport function initState(vm){\r\n    const opts = vm.$options;\r\n\r\n    if(opts.data){\r\n        initData(vm);\r\n    }\r\n\r\n}\r\nfunction proxy(vm,key,source){ // 取值的时候做代理，不是暴力的把_data 属性赋予给vm, 而且直接赋值会有命名冲突问题\r\n    Object.defineProperty(vm,key,{\r\n        get(){ // ?\r\n            return vm[source][key]; // vm._data.message\r\n        },\r\n        set(newValue){ // ?\r\n            vm[source][key] = newValue; // vm._data.message = newValue\r\n        }\r\n    })\r\n}\r\nfunction initData(vm){\r\n    let data = vm.$options.data; // 用户传入的数据\r\n\r\n    // 如果用户传递的是一个函数 则取函数的返回值作为对象 ， 如果就是对象那就直接使用这个对象\r\n    // 只有根实例可以data是一个对象\r\n\r\n    // data 和 vm._data 引用的是同一个人 -》 data被劫持了  vm._data也被劫持\r\n    data = vm._data =  isFunction(data) ? data.call(vm) : data; // _data 已经是响应式的了\r\n\r\n    // 需要将data变成响应式的 Object.defineProperty， 重写data中的所有属性\r\n    observe(data); // 观测对象中的属性\r\n\r\n\r\n\r\n    for(let key in data){ // vm.message => vm._data.message\r\n        proxy(vm,key,'_data');// 代理vm上的取值和设置值 和  vm._data 没关系了\r\n    }\r\n}\r\n","export function patch(el, vnode) {\r\n\r\n    // 删除老节点 根据vnode创建新节点，替换掉老节点\r\n    const elm = createElm(vnode); // 根据虚拟节点创造了真实节点\r\n    const parentNode = el.parentNode;\r\n    parentNode.insertBefore(elm, el.nextSibling); // el.nextSibling 不存在就是null 如果为null insertBefore就是appendChild\r\n    parentNode.removeChild(el);\r\n\r\n    return elm; // 返回最新节点\r\n}\r\n\r\n// 面试有问 虚拟节点的实现 -》 如何将虚拟节点渲染成真实节点\r\nfunction createElm(vnode) {\r\n    let { tag, data, children, text, vm } = vnode;\r\n    // 我们让虚拟节点和真实节点做一个映射关系, 后续某个虚拟节点更新了 我可以跟踪到真实节点，并且更新真实节点\r\n\r\n    if (typeof tag === 'string') {\r\n        vnode.el = document.createElement(tag);\r\n        // 如果有data属性，我们需要把data设置到元素上\r\n        updateProperties(vnode.el, data);\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        })\r\n    } else {\r\n        vnode.el = document.createTextNode(text);\r\n    }\r\n    return vnode.el\r\n}\r\n\r\nfunction updateProperties(el, props = {}) { // 后续写diff算法的时候 在进行完善, 没有考虑样式等\r\n    for (let key in props) {\r\n        el.setAttribute(key, props[key]);\r\n    }\r\n}","import { nextTick } from \"../utils\"\r\n\r\nlet queue = [] // 存放要更新的 watcher\r\nlet has = {}\r\n\r\nfunction flushSchedulerQueue() {\r\n  // beforeUpadte\r\n  queue.forEach(watcher => watcher.run())\r\n  queue = []\r\n  has = {}\r\n  pending = false\r\n}\r\n\r\nlet pending = false\r\nexport function queueWatcher(watcher) {\r\n  let id = watcher.id\r\n  if (has[id] == null) {\r\n    has[id] = true\r\n    queue.push(watcher)\r\n    if (!pending) {\r\n      nextTick(flushSchedulerQueue)\r\n      pending = true\r\n    }\r\n  }\r\n}","import Dep from \"./dep\"\r\nimport { queueWatcher } from \"./scheduler\"\r\n\r\nlet id = 0;\r\nclass Watcher {\r\n  constructor(vm,fn,cb, options) {\r\n    this.vm = vm\r\n    this.fn = fn\r\n    this.cb = cb\r\n    this.options = options\r\n    this.id = id++\r\n    this.depsId = new Set()\r\n    this.deps = []\r\n    this.getter = fn; // fn 就是页面渲染逻辑\r\n    this.get() // 表示上来后就做一次初始化\r\n  }\r\n  addDep(dep) {\r\n    let did = dep.id\r\n    if (!this.depsId.has(did)) {\r\n      this.depsId.add(did)\r\n      this.deps.push(dep) // 做了保存 id 的功能 并且让 watcher 记住 dep\r\n      dep.addSub(this)\r\n    }\r\n  }\r\n  get() {\r\n    Dep.target = this // Dep.target = watcher\r\n    this.getter() // 页面的渲染的逻辑 vm.name / vm.age\r\n    Dep.target = null // 渲染完毕后 就将标识清空了，只有在渲染的时候才会进行依赖收集\r\n  }\r\n  update() {\r\n    // 每次更新数据都会同步调用这个 update 方法，可以将更新的逻辑缓存起来，等会同步更新数据的逻辑执行完毕后，依次调用（去重的逻辑）\r\n    console.log('缓存更新')\r\n\r\n    queueWatcher(this)\r\n    // 可以做异步更新处理\r\n    // this.get()\r\n  }\r\n  run() {\r\n    console.log('真正执行更新')\r\n    this.get() // render()  取最新的 vm 上的数据\r\n  }\r\n}\r\n\r\nexport default Watcher","import { patch } from \"./vdom/patch\"\r\nimport Watcher from \"./observe/watcher\"\r\n\r\n\r\nexport function mountComponent(vm) {\r\n  let updateComponent = () => {\r\n    vm._update(vm._render())\r\n  }\r\n\r\n  // 每个组件都有一个 watcher, 我们把这个 watcher 称之为渲染 watcher\r\n  new Watcher(vm, updateComponent, () => {\r\n    console.log('后续增加更新钩子函数 update')\r\n  }, true)\r\n\r\n  // updateComponent()\r\n}\r\n\r\nexport function lifeCycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    // 采用的是 先深度遍历 创建节点（遇到节点就创造节点，递归创建）\r\n    const vm = this\r\n    vm.$el = patch(vm.$el, vnode)\r\n  }\r\n}","import { compileToFunction } from \"./compiler\";\r\nimport { initState } from \"./state\";\r\nimport { mountComponent } from \"./lifeCycle\";\r\nimport { nextTick } from \"./utils\"\r\n\r\nexport function initMixin(Vue) {\r\n    // 后续组件化开发的时候  Vue.extend 可以创造一个子组件，子组件可以继承Vue，子组件也可以调用_init方法\r\n    Vue.prototype._init = function(options) {\r\n        const vm = this;\r\n        // 把用户的选项放到 vm上，这样在其他方法中都可以获取到options 了\r\n        vm.$options = options; // 为了后续扩展的方法 都可以获取$options选项\r\n\r\n        // options中是用户传入的数据 el , data\r\n        initState(vm);\r\n        if (vm.$options.el) {\r\n            // 要将数据挂载到页面上\r\n            // 现在数据已经被劫持了， 数据变化需要更新视图 diff算法更新需要更新的部分\r\n            // vue -> template（写起来更符合直觉） -> jsx （灵活）\r\n            // vue3 template 写起来性能会更高一些 内部做了很多优化\r\n\r\n            // template -> ast语法树（用来描述语法的，描述语法本身的） -> 描述成一个树结构 ->  将代码重组成js语法\r\n            // 模板编译原理 （把template模板编译成render函数-》 虚拟DOM -》 diff算法比对虚拟DOM）\r\n            // ast -> render返回 -> vnode -> 生成真实dom\r\n            //      更新的时候再次调用render -> 新的vnode  -> 新旧比对 -> 更新真实dom\r\n            vm.$mount(vm.$options.el);\r\n        }\r\n    }\r\n    // new Vue({el}) new Vue().$mount\r\n    Vue.prototype.$mount = function(el) {\r\n        const vm = this;\r\n        const opts = vm.$options;\r\n        el = document.querySelector(el); // 获取真实的元素\r\n        vm.$el = el; // 页面真实元素\r\n\r\n        if (!opts.render) {\r\n            // 模板编译\r\n            let template = opts.template;\r\n            if (!template) {\r\n                template = el.outerHTML;\r\n            }\r\n            let render = compileToFunction(template)\r\n            opts.render = render;\r\n\r\n        }\r\n\r\n        // console.log(opts.render)\r\n       mountComponent(vm)\r\n    }\r\n\r\n    Vue.prototype.$nextTick = nextTick\r\n}","export function createElement(vm, tag, data = {}, ...children) {\r\n  return vnode(vm, tag, data, children, data.key, undefined)\r\n}\r\n\r\nexport function createText(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\n\r\nfunction vnode(vm, tag, data, children, key, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    data,\r\n    children,\r\n    key,\r\n    text\r\n  }\r\n}","import { isObject } from \"./utils\"\r\nimport { createElement, createText } from \"./vdom\"\r\n\r\nexport function renderMixin(Vue){\r\n    Vue.prototype._c = function () { // createElement 创建元素型的节点\r\n        const vm = this;\r\n        return createElement(vm,...arguments)\r\n    }\r\n    Vue.prototype._v = function (text) { // 创建文本的虚拟节点\r\n        const vm = this;\r\n        return createText(vm,text); // 描述虚拟节点是属于哪个实例的\r\n    }\r\n    Vue.prototype._s = function (val) { // JSON.stingfiy()\r\n        if(isObject(val)) return JSON.stringify(val);\r\n        return val;\r\n    }\r\n    Vue.prototype._render = function () {\r\n        const vm = this; // vm中有所有的数据 vm.xxx => vm._data.xxx\r\n        let { render } = vm.$options;\r\n        let vnode = render.call(vm);\r\n        return vnode;\r\n    }\r\n}","import { initMixin } from \"./init\";\r\nimport { lifeCycleMixin } from \"./lifeCycle\";\r\nimport { renderMixin } from \"./render\";\r\n\r\n// vue 要如何实现，原型模式，所有的功能都通过原型扩展的方式来添加\r\nfunction Vue(options){\r\n    this._init(options); // 实现vue的初始化功能\r\n}\r\n\r\ninitMixin(Vue);\r\nrenderMixin(Vue);\r\nlifeCycleMixin(Vue)\r\n\r\n\r\n// 导出vue给别人使用\r\nexport default Vue;\r\n\r\n\r\n\r\n// 1.new Vue 会调用_init方法进行初始化操作\r\n// 2.会将用户的选项放到 vm.$options上\r\n// 3.会对当前属性上搜素有没有data 数据   initState\r\n// 4.有data 判断data是不是一个函数 ，如果是函数取返回值 initData\r\n// 5.observe 去观测data中的数据 和 vm没关系，说明data已经变成了响应式\r\n// 6.vm上像取值也能取到data中的数据 vm._data = data 这样用户能取到data了  vm._data\r\n// 7.用户觉得有点麻烦 vm.xxx => vm._data\r\n// 8.如果更新对象不存在的属性，会导致视图不更新， 如果是数组更新索引和长度不会触发更新\r\n// 9.如果是替换成一个新对象，新对象会被进行劫持，如果是数组存放新内容 push unshift() 新增的内容也会被劫持\r\n// 通过__ob__ 进行标识这个对象被监控过  （在vue中被监控的对象身上都有一个__ob__ 这个属性）\r\n// 10如果你就想改索引 可以使用$set方法 内部就是splice()\r\n\r\n\r\n\r\n// 如果有el 需要挂载到页面上"],"names":["defaultTagRE","genProps","attrs","str","i","length","attr","name","styles","value","replace","arguments","JSON","stringify","slice","gen","el","type","generate","text","test","lastIndex","tokens","match","exec","index","push","trim","join","genChildren","children","map","item","ast","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElement","parent","start","element","end","tagName","pop","console","log","chars","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","compileToFunction","template","render","Function","toString","isFunction","val","isObject","isArray","Array","callbacks","waiting","flushCallbacks","forEach","fn","nextTick","Promise","resolve","then","oldArrayPrototype","prototype","arrayMethods","Object","create","methods","method","args","call","inserted","ob","__ob__","observeArray","id","Dep","constructor","subs","depend","target","addDep","addSub","watcher","notify","update","Observer","defineProperty","enumerable","__proto__","walk","data","observe","keys","key","defineReactive","obj","dep","get","set","newValue","initState","vm","opts","$options","initData","proxy","source","_data","patch","vnode","elm","createElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","child","appendChild","createTextNode","props","setAttribute","queue","has","flushSchedulerQueue","run","pending","queueWatcher","Watcher","cb","options","depsId","Set","deps","getter","did","add","mountComponent","updateComponent","_update","_render","lifeCycleMixin","Vue","$el","initMixin","_init","$mount","querySelector","outerHTML","$nextTick","undefined","createText","renderMixin","_c","_v","_s"],"mappings":"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"}